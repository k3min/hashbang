(function(c){var f=c.location,e=c.document.documentElement,b=c.HA={version:"0.0.1",endpoint:"api/",main:function(){b.request=new HB.Request(b.endpoint);b.request.get({success:b.sync,error:b.error})},create:function(a,d){var c={type:a};switch(a){case b.TYPE.COLLECTION:c.key="handle";c.value="new";break;case b.TYPE.BLOCK:c.key="collectionId",c.value=d}b.request.send({method:"POST",data:c})},sync:function(a){var d=c.overview;for(b.metadata={attributes:a.attributes,collections:a.collections,tags:a.tags};d.firstChild;)d.removeChild(d.firstChild);
for(;tags.firstChild;)tags.removeChild(tags.firstChild);for(;attributes.firstChild;)attributes.removeChild(attributes.firstChild);d.appendChild(c.nav.render(a.collections));tags.appendChild(c.datalist.render(a.tags));attributes.appendChild(c.datalist.render(a.attributes));void 0===HB.root?(HB.noCache=!0,HB.main(),HB.root.addEventListener("update",b.root,!1),HB.root.addEventListener("change",b.save,!1)):void 0!==a.target&&(f.hash=a.target)},root:function(a){a=a.detail;var c=void 0!==a.block;b.target=
{type:c?b.TYPE.BLOCK:b.TYPE.COLLECTION,id:+(c?a.search("handle",a.block).blocks[0]:a).id}},save:function(a){a.target.validity.valid&&b.request.send({method:"POST",data:{type:b.target.type,id:b.target.id,key:a.target.name,value:a.target.value}})},"delete":function(){confirm(b.strings["delete"].format(b.target.type))&&b.request.send({method:"DELETE",data:{type:b.target.type,id:b.target.id}})},error:function(a){e.classList.add("error");alert(b.strings[a.status]||b.strings.error)},TYPE:{COLLECTION:"collection",
BLOCK:"block"},strings:{"delete":"Are you sure you want to delete this {}? This action cannot be undone.",error:"Something went wrong!",400:"Something went seriously wrong!",401:"You are not authorized!",500:"Something went wrong on the server!"}};HB.Request.prototype.send=function(a){e.classList.add("loading");this.success=b.sync;this.error=b.error;this.xhr.open(a.method||"HEAD",this.endpoint,!0);this.xhr.setRequestHeader("Content-Type","application/json");this.xhr.send(JSON.stringify(a.data))}})(this);